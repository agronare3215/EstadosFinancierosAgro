<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Estados Financieros</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para la impresión */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none !important;
            }
            .print-container {
                box-shadow: none !important;
                border: none !important;
                margin: 0 !important;
                padding: 0 !important;
                max-width: 100% !important;
            }
            .print-section {
                display: block !important;
                page-break-inside: avoid;
                margin-bottom: 2rem;
            }
             .print-bg-white {
                background-color: white !important;
                color: black !important;
            }
            h1, h2, h3, p, span, td, th {
                color: black !important;
            }
            .print-table {
                border-color: #ccc !important;
            }
            .print-table th, .print-table td {
                border-color: #ddd !important;
            }
        }
    </style>
</head>
<body class="bg-slate-900 text-white flex justify-center items-start min-h-screen p-4 sm:p-6 md:p-8">

    <main class="w-full max-w-5xl bg-slate-800 rounded-xl shadow-2xl p-6 sm:p-8 print-container print-bg-white">
        <!-- Encabezado -->
        <header class="text-center mb-8 no-print">
            <h1 class="text-3xl sm:text-4xl font-bold text-cyan-400">Generador de Estados Financieros</h1>
            <p class="text-slate-400 mt-2">Ingresa los datos de tu empresa para generar los reportes al instante.</p>
        </header>

        <!-- Información de la Empresa y Fecha -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 no-print">
            <div>
                <label for="companyName" class="block text-sm font-medium text-slate-300 mb-1">Nombre de la Empresa</label>
                <input type="text" id="companyName" class="w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none" placeholder="Mi Empresa S.A. de C.V.">
            </div>
            <div>
                <label for="reportDate" class="block text-sm font-medium text-slate-300 mb-1">Fecha del Reporte</label>
                <input type="date" id="reportDate" class="w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none">
            </div>
        </div>

        <!-- Pestañas de Navegación -->
        <div class="mb-6 border-b border-slate-700 no-print">
            <nav class="flex space-x-4" aria-label="Tabs">
                <button id="tab-datos" onclick="switchTab('datos')" class="tab-button bg-slate-700 text-cyan-400 px-4 py-2 rounded-t-md font-semibold">1. Ingresar Datos</button>
                <button id="tab-balance" onclick="switchTab('balance')" class="tab-button px-4 py-2 font-medium text-slate-400">2. Balance General</button>
                <button id="tab-resultados" onclick="switchTab('resultados')" class="tab-button px-4 py-2 font-medium text-slate-400">3. Estado de Resultados</button>
            </nav>
        </div>
        
        <!-- Contenido de las Pestañas -->
        <div id="content-container">
            <!-- Pestaña 1: Ingresar Datos -->
            <div id="content-datos" class="tab-content">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8">
                    <!-- Columna Izquierda: Balance -->
                    <div class="space-y-6">
                        <h3 class="text-2xl font-bold text-cyan-400 border-b-2 border-cyan-400 pb-2">Balance</h3>
                        
                        <!-- Activos -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Activos</h4>
                            <div class="pl-4 border-l-2 border-slate-600 space-y-3">
                                <h5 class="font-medium text-slate-300">Activo Circulante</h5>
                                <div class="pl-4 space-y-2">
                                    <div class="input-group"> <label>Caja y Bancos:</label> <input type="number" id="caja_bancos" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Cuentas por Cobrar:</label> <input type="number" id="cuentas_cobrar" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Inventarios:</label> <input type="number" id="inventarios" class="input-field" placeholder="0.00"> </div>
                                </div>
                                <h5 class="font-medium text-slate-300">Activo Fijo</h5>
                                <div class="pl-4 space-y-2">
                                     <div class="input-group"> <label>Terrenos y Edificios:</label> <input type="number" id="terrenos_edificios" class="input-field" placeholder="0.00"> </div>
                                     <div class="input-group"> <label>Maquinaria y Equipo:</label> <input type="number" id="maquinaria_equipo" class="input-field" placeholder="0.00"> </div>
                                     <div class="input-group"> <label>Mobiliario y Equipo de Oficina:</label> <input type="number" id="mobiliario" class="input-field" placeholder="0.00"> </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pasivos y Patrimonio -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Pasivos y Patrimonio</h4>
                            <div class="pl-4 border-l-2 border-slate-600 space-y-3">
                                <h5 class="font-medium text-slate-300">Pasivo Circulante</h5>
                                <div class="pl-4 space-y-2">
                                    <div class="input-group"> <label>Proveedores (Cuentas por Pagar):</label> <input type="number" id="proveedores" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Préstamos a Corto Plazo:</label> <input type="number" id="prestamos_corto" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Impuestos por Pagar:</label> <input type="number" id="impuestos_pagar" class="input-field" placeholder="0.00"> </div>
                                </div>
                                <h5 class="font-medium text-slate-300">Pasivo a Largo Plazo</h5>
                                <div class="pl-4 space-y-2">
                                     <div class="input-group"> <label>Préstamos Bancarios a Largo Plazo:</label> <input type="number" id="prestamos_largo" class="input-field" placeholder="0.00"> </div>
                                </div>
                                <h5 class="font-medium text-slate-300">Patrimonio</h5>
                                <div class="pl-4 space-y-2">
                                     <div class="input-group"> <label>Capital Social:</label> <input type="number" id="capital_social" class="input-field" placeholder="0.00"> </div>
                                     <div class="input-group"> <label>Utilidades Retenidas:</label> <input type="number" id="utilidades_retenidas" class="input-field" placeholder="0.00"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Columna Derecha: Estado de Resultados -->
                    <div class="space-y-6">
                        <h3 class="text-2xl font-bold text-lime-400 border-b-2 border-lime-400 pb-2">Estado de Resultados</h3>

                        <!-- Ingresos -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Ingresos</h4>
                            <div class="pl-4 border-l-2 border-slate-600 space-y-2">
                                <div class="input-group"> <label>Ventas / Ingresos por Servicios:</label> <input type="number" id="ingresos_ventas" class="input-field" placeholder="0.00"> </div>
                            </div>
                        </div>

                        <!-- Costos y Gastos -->
                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-slate-200">Costos y Gastos</h4>
                            <div class="pl-4 border-l-2 border-slate-600 space-y-3">
                                <h5 class="font-medium text-slate-300">Costos</h5>
                                 <div class="pl-4 space-y-2">
                                    <div class="input-group"> <label>Costo de Ventas:</label> <input type="number" id="costo_ventas" class="input-field" placeholder="0.00"> </div>
                                </div>
                                <h5 class="font-medium text-slate-300">Gastos Operativos</h5>
                                <div class="pl-4 space-y-2">
                                    <div class="input-group"> <label>Sueldos y Salarios:</label> <input type="number" id="gastos_sueldos" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Renta:</label> <input type="number" id="gastos_renta" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Servicios Públicos (Luz, Agua, etc.):</label> <input type="number" id="gastos_servicios" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Publicidad y Marketing:</label> <input type="number" id="gastos_publicidad" class="input-field" placeholder="0.00"> </div>
                                    <div class="input-group"> <label>Otros Gastos Administrativos:</label> <input type="number" id="gastos_admin" class="input-field" placeholder="0.00"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pestaña 2: Balance General -->
            <div id="content-balance" class="tab-content hidden print-section">
                <div class="report-header text-center mb-6 hidden">
                    <h1 id="balance-company-name" class="text-2xl font-bold"></h1>
                    <h2 class="text-xl font-semibold">Balance General</h2>
                    <p id="balance-report-date"></p>
                </div>
                <h3 class="text-2xl font-bold text-cyan-400 mb-4">Balance General</h3>
                <div id="balance-status" class="mb-4 p-3 rounded-md text-center font-semibold"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Activos -->
                    <div class="bg-slate-900/50 p-4 rounded-lg">
                        <h4 class="text-xl font-bold mb-3">Activos</h4>
                        <table class="w-full report-table print-table">
                            <tbody>
                                <tr class="font-semibold bg-slate-700/50"><td colspan="2" class="p-2">Activo Circulante</td></tr>
                                <tr><td>Caja y Bancos</td><td class="text-right" id="val-caja_bancos"></td></tr>
                                <tr><td>Cuentas por Cobrar</td><td class="text-right" id="val-cuentas_cobrar"></td></tr>
                                <tr><td>Inventarios</td><td class="text-right" id="val-inventarios"></td></tr>
                                <tr class="font-semibold border-t-2 border-slate-600"><td>Total Activo Circulante</td><td class="text-right" id="total-activo-circulante"></td></tr>
                                
                                <tr class="font-semibold bg-slate-700/50"><td colspan="2" class="p-2 mt-4">Activo Fijo</td></tr>
                                <tr><td>Terrenos y Edificios</td><td class="text-right" id="val-terrenos_edificios"></td></tr>
                                <tr><td>Maquinaria y Equipo</td><td class="text-right" id="val-maquinaria_equipo"></td></tr>
                                <tr><td>Mobiliario y Equipo de Oficina</td><td class="text-right" id="val-mobiliario"></td></tr>
                                <tr class="font-semibold border-t-2 border-slate-600"><td>Total Activo Fijo</td><td class="text-right" id="total-activo-fijo"></td></tr>
                            </tbody>
                            <tfoot>
                                <tr class="text-lg font-bold bg-cyan-500/20 border-t-4 border-cyan-500">
                                    <td class="p-2">TOTAL ACTIVOS</td>
                                    <td class="text-right p-2" id="total-activos"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <!-- Pasivos y Patrimonio -->
                     <div class="bg-slate-900/50 p-4 rounded-lg">
                        <h4 class="text-xl font-bold mb-3">Pasivos y Patrimonio</h4>
                        <table class="w-full report-table print-table">
                            <tbody>
                                <tr class="font-semibold bg-slate-700/50"><td colspan="2" class="p-2">Pasivo Circulante</td></tr>
                                <tr><td>Proveedores</td><td class="text-right" id="val-proveedores"></td></tr>
                                <tr><td>Préstamos a Corto Plazo</td><td class="text-right" id="val-prestamos_corto"></td></tr>
                                <tr><td>Impuestos por Pagar</td><td class="text-right" id="val-impuestos_pagar"></td></tr>
                                <tr class="font-semibold border-t-2 border-slate-600"><td>Total Pasivo Circulante</td><td class="text-right" id="total-pasivo-circulante"></td></tr>
                                
                                <tr class="font-semibold bg-slate-700/50"><td colspan="2" class="p-2 mt-4">Pasivo a Largo Plazo</td></tr>
                                <tr><td>Préstamos Bancarios a Largo Plazo</td><td class="text-right" id="val-prestamos_largo"></td></tr>
                                <tr class="font-semibold border-t-2 border-slate-600"><td>Total Pasivo a Largo Plazo</td><td class="text-right" id="total-pasivo-largo"></td></tr>
                                
                                <tr class="text-lg font-bold bg-slate-700/50"><td colspan="2" class="p-2 mt-4">Total Pasivos</td><td class="text-right font-bold" id="total-pasivos"></td></tr>

                                <tr class="font-semibold bg-slate-700/50"><td colspan="2" class="p-2 mt-4">Patrimonio</td></tr>
                                <tr><td>Capital Social</td><td class="text-right" id="val-capital_social"></td></tr>
                                <tr><td>Utilidades Retenidas</td><td class="text-right" id="val-utilidades_retenidas"></td></tr>
                                <tr><td>Utilidad del Ejercicio</td><td class="text-right" id="val-utilidad-ejercicio"></td></tr>
                                <tr class="font-semibold border-t-2 border-slate-600"><td>Total Patrimonio</td><td class="text-right" id="total-patrimonio"></td></tr>
                            </tbody>
                             <tfoot>
                                <tr class="text-lg font-bold bg-cyan-500/20 border-t-4 border-cyan-500">
                                    <td class="p-2">TOTAL PASIVO + PATRIMONIO</td>
                                    <td class="text-right p-2" id="total-pasivo-patrimonio"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pestaña 3: Estado de Resultados -->
            <div id="content-resultados" class="tab-content hidden print-section">
                <div class="report-header text-center mb-6 hidden">
                    <h1 id="resultados-company-name" class="text-2xl font-bold"></h1>
                    <h2 class="text-xl font-semibold">Estado de Resultados</h2>
                    <p id="resultados-report-date"></p>
                </div>
                <h3 class="text-2xl font-bold text-lime-400 mb-4">Estado de Resultados</h3>
                 <div class="max-w-2xl mx-auto bg-slate-900/50 p-4 rounded-lg">
                    <table class="w-full report-table print-table">
                        <tbody>
                            <tr><td>Ingresos por Ventas / Servicios</td><td class="text-right" id="val-ingresos_ventas"></td></tr>
                            <tr><td>(-) Costo de Ventas</td><td class="text-right" id="val-costo_ventas"></td></tr>
                            <tr class="font-semibold text-lg border-t-2 border-slate-600 bg-slate-700/50">
                                <td class="p-2">Utilidad Bruta</td>
                                <td class="text-right p-2" id="val-utilidad-bruta"></td>
                            </tr>
                            <tr class="font-semibold"><td colspan="2" class="pt-4 pb-1">Gastos Operativos:</td></tr>
                            <tr><td class="pl-4">Sueldos y Salarios</td><td class="text-right" id="val-gastos_sueldos"></td></tr>
                            <tr><td class="pl-4">Renta</td><td class="text-right" id="val-gastos_renta"></td></tr>
                            <tr><td class="pl-4">Servicios Públicos</td><td class="text-right" id="val-gastos_servicios"></td></tr>
                            <tr><td class="pl-4">Publicidad y Marketing</td><td class="text-right" id="val-gastos_publicidad"></td></tr>
                            <tr><td class="pl-4">Otros Gastos Administrativos</td><td class="text-right" id="val-gastos_admin"></td></tr>
                             <tr class="font-semibold border-t-2 border-slate-600">
                                <td class="p-2">(-) Total Gastos Operativos</td>
                                <td class="text-right p-2" id="total-gastos-operativos"></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr class="text-xl font-bold bg-lime-500/20 border-t-4 border-lime-500">
                                <td class="p-3">Utilidad Neta del Ejercicio</td>
                                <td class="text-right p-3" id="val-utilidad-neta"></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- Botón de Imprimir -->
        <div class="mt-8 text-center no-print">
            <button onclick="printReport()" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-300 shadow-lg">
                Imprimir / Guardar como PDF
            </button>
        </div>

    </main>
    
    <!-- Lógica de la Aplicación -->
    <script>
        // --- Estilos para los Inputs ---
        const inputGroupStyle = "grid grid-cols-2 items-center gap-2";
        document.querySelectorAll('.input-group').forEach(el => el.className = inputGroupStyle);
        const inputFieldStyle = "w-full bg-slate-700 border border-slate-600 rounded-md px-2 py-1 text-right focus:ring-1 focus:ring-cyan-500 focus:border-cyan-500 outline-none";
        document.querySelectorAll('.input-field').forEach(el => el.className = inputFieldStyle);

        // --- Lógica de Pestañas ---
        const tabs = ['datos', 'balance', 'resultados'];
        function switchTab(activeTab) {
            tabs.forEach(tab => {
                const button = document.getElementById(`tab-${tab}`);
                const content = document.getElementById(`content-${tab}`);
                if (tab === activeTab) {
                    button.classList.add('bg-slate-700', 'text-cyan-400');
                    button.classList.remove('text-slate-400');
                    content.classList.remove('hidden');
                } else {
                    button.classList.remove('bg-slate-700', 'text-cyan-400');
                    button.classList.add('text-slate-400');
                    content.classList.add('hidden');
                }
            });
        }
        
        // --- Funciones de Cálculo y Actualización ---
        const currencyFormatter = new Intl.NumberFormat('es-MX', {
            style: 'currency',
            currency: 'MXN'
        });

        function getValue(id) {
            return parseFloat(document.getElementById(id).value) || 0;
        }

        function formatCurrency(value) {
            return currencyFormatter.format(value);
        }

        function updateStatements() {
            // Obtener todos los valores de los inputs
            const values = {
                caja_bancos: getValue('caja_bancos'),
                cuentas_cobrar: getValue('cuentas_cobrar'),
                inventarios: getValue('inventarios'),
                terrenos_edificios: getValue('terrenos_edificios'),
                maquinaria_equipo: getValue('maquinaria_equipo'),
                mobiliario: getValue('mobiliario'),
                proveedores: getValue('proveedores'),
                prestamos_corto: getValue('prestamos_corto'),
                impuestos_pagar: getValue('impuestos_pagar'),
                prestamos_largo: getValue('prestamos_largo'),
                capital_social: getValue('capital_social'),
                utilidades_retenidas: getValue('utilidades_retenidas'),
                ingresos_ventas: getValue('ingresos_ventas'),
                costo_ventas: getValue('costo_ventas'),
                gastos_sueldos: getValue('gastos_sueldos'),
                gastos_renta: getValue('gastos_renta'),
                gastos_servicios: getValue('gastos_servicios'),
                gastos_publicidad: getValue('gastos_publicidad'),
                gastos_admin: getValue('gastos_admin')
            };

            // --- Cálculos del Estado de Resultados ---
            const utilidadBruta = values.ingresos_ventas - values.costo_ventas;
            const totalGastosOp = values.gastos_sueldos + values.gastos_renta + values.gastos_servicios + values.gastos_publicidad + values.gastos_admin;
            const utilidadNeta = utilidadBruta - totalGastosOp;

            // --- Cálculos del Balance General ---
            const totalActivoCirculante = values.caja_bancos + values.cuentas_cobrar + values.inventarios;
            const totalActivoFijo = values.terrenos_edificios + values.maquinaria_equipo + values.mobiliario;
            const totalActivos = totalActivoCirculante + totalActivoFijo;

            const totalPasivoCirculante = values.proveedores + values.prestamos_corto + values.impuestos_pagar;
            const totalPasivoLargo = values.prestamos_largo;
            const totalPasivos = totalPasivoCirculante + totalPasivoLargo;

            const totalPatrimonio = values.capital_social + values.utilidades_retenidas + utilidadNeta;
            const totalPasivoPatrimonio = totalPasivos + totalPatrimonio;

            // --- Actualizar Estado de Resultados en la UI ---
            document.getElementById('val-ingresos_ventas').innerText = formatCurrency(values.ingresos_ventas);
            document.getElementById('val-costo_ventas').innerText = formatCurrency(values.costo_ventas);
            document.getElementById('val-utilidad-bruta').innerText = formatCurrency(utilidadBruta);
            document.getElementById('val-gastos_sueldos').innerText = formatCurrency(values.gastos_sueldos);
            document.getElementById('val-gastos_renta').innerText = formatCurrency(values.gastos_renta);
            document.getElementById('val-gastos_servicios').innerText = formatCurrency(values.gastos_servicios);
            document.getElementById('val-gastos_publicidad').innerText = formatCurrency(values.gastos_publicidad);
            document.getElementById('val-gastos_admin').innerText = formatCurrency(values.gastos_admin);
            document.getElementById('total-gastos-operativos').innerText = formatCurrency(totalGastosOp);
            document.getElementById('val-utilidad-neta').innerText = formatCurrency(utilidadNeta);

            // --- Actualizar Balance General en la UI ---
            // Activos
            document.getElementById('val-caja_bancos').innerText = formatCurrency(values.caja_bancos);
            document.getElementById('val-cuentas_cobrar').innerText = formatCurrency(values.cuentas_cobrar);
            document.getElementById('val-inventarios').innerText = formatCurrency(values.inventarios);
            document.getElementById('total-activo-circulante').innerText = formatCurrency(totalActivoCirculante);
            document.getElementById('val-terrenos_edificios').innerText = formatCurrency(values.terrenos_edificios);
            document.getElementById('val-maquinaria_equipo').innerText = formatCurrency(values.maquinaria_equipo);
            document.getElementById('val-mobiliario').innerText = formatCurrency(values.mobiliario);
            document.getElementById('total-activo-fijo').innerText = formatCurrency(totalActivoFijo);
            document.getElementById('total-activos').innerText = formatCurrency(totalActivos);

            // Pasivos y Patrimonio
            document.getElementById('val-proveedores').innerText = formatCurrency(values.proveedores);
            document.getElementById('val-prestamos_corto').innerText = formatCurrency(values.prestamos_corto);
            document.getElementById('val-impuestos_pagar').innerText = formatCurrency(values.impuestos_pagar);
            document.getElementById('total-pasivo-circulante').innerText = formatCurrency(totalPasivoCirculante);
            document.getElementById('val-prestamos_largo').innerText = formatCurrency(values.prestamos_largo);
            document.getElementById('total-pasivo-largo').innerText = formatCurrency(totalPasivoLargo);
            document.getElementById('total-pasivos').innerText = formatCurrency(totalPasivos);
            document.getElementById('val-capital_social').innerText = formatCurrency(values.capital_social);
            document.getElementById('val-utilidades_retenidas').innerText = formatCurrency(values.utilidades_retenidas);
            document.getElementById('val-utilidad-ejercicio').innerText = formatCurrency(utilidadNeta);
            document.getElementById('total-patrimonio').innerText = formatCurrency(totalPatrimonio);
            document.getElementById('total-pasivo-patrimonio').innerText = formatCurrency(totalPasivoPatrimonio);

            // --- Verificación del Balance ---
            const balanceStatusEl = document.getElementById('balance-status');
            if (Math.abs(totalActivos - totalPasivoPatrimonio) < 0.01) { // Usamos una tolerancia pequeña por errores de punto flotante
                balanceStatusEl.innerText = '✅ Balance Correcto: Total Activos = Total Pasivo + Patrimonio';
                balanceStatusEl.className = 'mb-4 p-3 rounded-md text-center font-semibold bg-green-500/20 text-green-300';
            } else {
                balanceStatusEl.innerText = '❌ Desbalance: Total Activos es diferente a Total Pasivo + Patrimonio';
                balanceStatusEl.className = 'mb-4 p-3 rounded-md text-center font-semibold bg-red-500/20 text-red-300';
            }
        }

        // --- Función de Impresión ---
        function printReport() {
            const companyName = document.getElementById('companyName').value || 'Mi Empresa S.A. de C.V.';
            const reportDateInput = document.getElementById('reportDate').value;
            let reportDate = '';
            if (reportDateInput) {
                const date = new Date(reportDateInput + 'T00:00:00-06:00'); // Asegurar zona horaria
                 const options = { year: 'numeric', month: 'long', day: 'numeric' };
                 reportDate = `Al ${date.toLocaleDateString('es-MX', options)}`;
            } else {
                reportDate = `Al ${new Date().toLocaleDateString('es-MX', { year: 'numeric', month: 'long', day: 'numeric' })}`;
            }

            // Actualizar encabezados para impresión
            document.getElementById('balance-company-name').innerText = companyName;
            document.getElementById('balance-report-date').innerText = reportDate;
            document.getElementById('resultados-company-name').innerText = companyName;
            document.getElementById('resultados-report-date').innerText = reportDate;

            // Mostrar todas las secciones de reporte para impresión
            document.getElementById('content-balance').classList.remove('hidden');
            document.getElementById('content-resultados').classList.remove('hidden');

            window.print();

            // Ocultar de nuevo después de imprimir (o cancelar)
            switchTab('balance'); // O vuelve a la pestaña activa antes de imprimir
        }

        // --- Event Listeners ---
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', updateStatements);
        });

        // --- Inicialización ---
        window.onload = () => {
             // Asignar fecha actual por defecto
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            document.getElementById('reportDate').value = `${yyyy}-${mm}-${dd}`;
            
            updateStatements();
            switchTab('datos');
        };

        // Estilo adicional para tablas de reporte
        const reportTableStyle = {
            cell: 'p-2 border-b border-slate-700 print-table-cell',
            textRight: 'text-right'
        };
        document.querySelectorAll('.report-table td').forEach(td => {
            td.classList.add(...reportTableStyle.cell.split(' '));
            if (td.classList.contains('text-right')) {
                 td.classList.add(...reportTableStyle.textRight.split(' '));
            }
        });

    </script>
</body>
</html>




